{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\almog\\\\ReactPro\\\\client\\\\src\\\\components\\\\Cart.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useReducer, useState } from \"react\";\nimport CartGrid from '../CartGrid.js';\nimport axios from \"axios\";\nimport '../css/';\nimport { Store } from '../../Store.js';\nimport Form from '../Form.js';\nimport Modal from '../Modal.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_REQUEST\":\n      return {\n        ...state,\n        loading: true\n      };\n    case \"FETCH_SUCCESS\":\n      return {\n        ...state,\n        loading: false,\n        cartItems: action.payload\n      };\n    case \"FETCH_ERROR\":\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    default:\n      return state;\n  }\n};\nfunction Cart() {\n  _s();\n  const [topModal, setTopModal] = useState(false);\n  const [{\n    loading\n  }, dispatch] = useReducer(reducer, {\n    cartItems: [],\n    loading: false,\n    error: false\n  });\n  const {\n    state: {\n      cart\n    },\n    dispatch: ctxDispatch\n  } = useContext(Store);\n  const onSubmit = e => {\n    e.preventDefault();\n    const fetchData = async () => {\n      dispatch({\n        type: \"FETCH_REQUEST\"\n      });\n      const {\n        data\n      } = await axios({\n        method: 'POST',\n        url: 'http://localhost:3001/add-order',\n        data: {\n          orderItems: cart.cartItems,\n          name: e.target[0].value,\n          email: e.target[1].value,\n          address: e.target[2].value,\n          phone: e.target[3].value,\n          total: cart.total.toFixed()\n        }\n      }).catch(err => {\n        dispatch({\n          type: \"FETCH_ERROR\",\n          payload: err\n        });\n      });\n      dispatch({\n        type: \"FETCH_SUCCESS\",\n        payload: data\n      });\n    };\n    fetchData().then(data => {\n      axios({\n        method: 'POST',\n        url: 'http://localhost:3001/delete-cart'\n      }).then(() => {\n        ctxDispatch({\n          type: \"DELETE_CART\"\n        });\n        clearCart();\n      });\n    });\n  };\n  const clearCart = () => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:3001/delete-cart'\n    }).then(() => {\n      ctxDispatch({\n        type: \"DELETE_CART\"\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      toggleModal: setTopModal,\n      topModal: topModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CartGrid, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), cart.cartItems.length !== 0 ? /*#__PURE__*/_jsxDEV(Form, {\n      clearCart: clearCart,\n      handleSubmit: onSubmit,\n      cart: cart,\n      toggleModal: setTopModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 23\n    }, this) : loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 128\n    }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price container\",\n      children: [\" Total Price : $\", cart.total.toFixed(), \"  \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 14\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n_s(Cart, \"4u6XFaqmQrZCoc5vqy0+akTxyow=\");\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useContext","useReducer","useState","CartGrid","axios","Store","Form","Modal","reducer","state","action","type","loading","cartItems","payload","error","Cart","topModal","setTopModal","dispatch","cart","ctxDispatch","onSubmit","e","preventDefault","fetchData","data","method","url","orderItems","name","target","value","email","address","phone","total","toFixed","catch","err","then","clearCart","length"],"sources":["C:/Users/almog/ReactPro/client/src/components/Cart.js"],"sourcesContent":["import React, { useContext, useReducer, useState } from \"react\";\nimport CartGrid from '../CartGrid.js';\nimport axios from \"axios\";\nimport '../css/'\nimport { Store } from '../../Store.js';\nimport Form from '../Form.js';\nimport Modal from '../Modal.js';\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case \"FETCH_REQUEST\":\n            return { ...state, loading: true };\n        case \"FETCH_SUCCESS\":\n            return { ...state, loading: false, cartItems: action.payload };\n        case \"FETCH_ERROR\":\n            return { ...state, loading: false, error: action.payload };\n        default:\n            return state;\n    }\n};\n\nfunction Cart() {\n    const [topModal, setTopModal] = useState(false);\n\n    const [{ loading }, dispatch] = useReducer(reducer, {\n        cartItems: [],\n        loading: false,\n        error: false,\n    });\n    const { state: { cart }, dispatch: ctxDispatch } = useContext(Store);\n    const onSubmit = (e) => {\n        e.preventDefault();\n        const fetchData = async () => {\n            dispatch({ type: \"FETCH_REQUEST\" });\n            const { data } = await axios({\n                method: 'POST',\n                url: 'http://localhost:3001/add-order',\n                data: {\n                    orderItems: cart.cartItems,\n                    name: e.target[0].value,\n                    email: e.target[1].value,\n                    address: e.target[2].value,\n                    phone: e.target[3].value,\n                    total: cart.total.toFixed()\n                }\n            \n                    \n            }).catch((err) => {\n                dispatch({ type: \"FETCH_ERROR\", payload: err });\n            });\n            \n            dispatch({ type: \"FETCH_SUCCESS\", payload: data });\n            \n        };\n        fetchData().then((data) => {\n            axios({\n                method: 'POST',\n                url: 'http://localhost:3001/delete-cart',\n            }).then(() => {\n                ctxDispatch({ type: \"DELETE_CART\" });\n                clearCart();\n            });\n        });\n    }\n    const clearCart = () => {\n        axios({\n            method: 'POST',\n            url: 'http://localhost:3001/delete-cart',\n        }).then(() => {\n            ctxDispatch({ type: \"DELETE_CART\" });\n        });\n    }\n\n    return (\n        <div>\n            \n            <Modal toggleModal={setTopModal} topModal={topModal} />\n            \n            <CartGrid>\n                \n            </CartGrid> \n               \n           \n            {\n                cart.cartItems.length !== 0\n                    ? <Form clearCart={clearCart} handleSubmit={onSubmit} cart={cart} toggleModal={setTopModal} /> : loading ? <div>Loading...</div>\n                        : ''\n            }\n             <div className=\"price container\"> Total Price : ${cart.total.toFixed()}  </div>\n        </div >\n    );\n    \n    \n    \n}\n\n\nexport default Cart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}