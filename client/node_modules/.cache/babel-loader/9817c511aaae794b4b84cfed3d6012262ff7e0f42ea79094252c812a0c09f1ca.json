{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useReducer,useContext}from'react';import{MDBContainer,MDBRow,MDBCol}from'mdb-react-ui-kit';import Spinner from'react-bootstrap/Spinner';import axios from'axios';import CartItem from'./CartItem.js';import{Store}from'../../Store.js';import{jsx as _jsx}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case\"FETCH_REQUEST\":return _objectSpread(_objectSpread({},state),{},{loading:true});case\"FETCH_SUCCESS\":return _objectSpread(_objectSpread({},state),{},{loading:false});case\"FETCH_ERROR\":return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});default:return state;}};function CartGrid(){var _useContext=useContext(Store),state=_useContext.state;var ctxCart=state.cart.cartItems;var _useReducer=useReducer(reducer,{products:[],loading:false,error:false}),_useReducer2=_slicedToArray(_useReducer,2),loading=_useReducer2[0].loading,dispatch=_useReducer2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var Data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"FETCH_REQUEST\"});_context.next=3;return axios({method:'GET',url:'http://localhost:3001/cart'}).catch(function(err){dispatch({type:\"FETCH_ERROR\",payload:err});});case 3:Data=_context.sent;setCartItems(Data.data[0].cartItems);dispatch({type:\"FETCH_SUCCESS\"});case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);// Card components creation:\nvar Items=cartItems.map(function(product){return/*#__PURE__*/_jsx(MDBCol,{size:\"4\",sm:4,lg:4,xl:4,xxl:4,children:/*#__PURE__*/_jsx(CartItem,{items:product},product._id)},product._id);});// Seperate To Rows:\nvar final=[];for(var i=0;i<Items.length;i+3){var slice=Items.splice(0,3);final.push(/*#__PURE__*/_jsx(MDBRow,{className:\"Row\"+i,children:slice},i++));}return/*#__PURE__*/_jsx(MDBContainer,{className:\"mt-3\",children:/*#__PURE__*/_jsx(MDBRow,{className:\"mb-3\",children:ctxCart.length===0?/*#__PURE__*/_jsx(\"h1\",{className:\"h1\",children:\"Cart is Empty\"}):loading?/*#__PURE__*/_jsx(Spinner,{variant:\"primary\",animation:\"border\",role:\"status\",className:\"loading\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}):final})});};export default CartGrid;","map":{"version":3,"names":["React","useEffect","useState","useReducer","useContext","MDBContainer","MDBRow","MDBCol","Spinner","axios","CartItem","Store","reducer","state","action","type","loading","error","payload","CartGrid","ctxCart","cart","cartItems","products","dispatch","setCartItems","fetchData","method","url","catch","err","Data","data","Items","map","product","_id","final","i","length","slice","splice","push"],"sources":["C:/Users/almog/ReactPro/client/src/components/structures/CartGrid.js"],"sourcesContent":["import React, { useEffect, useState, useReducer, useContext } from 'react';\nimport { MDBContainer, MDBRow, MDBCol } from 'mdb-react-ui-kit';\nimport Spinner from 'react-bootstrap/Spinner';\nimport axios from 'axios';\nimport CartItem from './CartItem.js';\nimport { Store } from '../../Store.js';\n\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case \"FETCH_REQUEST\":\n            return { ...state, loading: true };\n        case \"FETCH_SUCCESS\":\n            return { ...state, loading: false };\n        case \"FETCH_ERROR\":\n            return { ...state, loading: false, error: action.payload };\n        default:\n            return state;\n    }\n};\n\n\nfunction CartGrid() {\n    const { state } = useContext(Store);\n    const ctxCart = state.cart.cartItems;\n    const [{ loading }, dispatch] = useReducer(reducer, {\n        products: [],\n        loading: false,\n        error: false,\n    });\n\n    const [cartItems, setCartItems] = useState([]);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            dispatch({ type: \"FETCH_REQUEST\" });\n            const Data = await axios({\n                method: 'GET',\n                url: 'http://localhost:3001/cart',\n            }).catch((err) => {\n                dispatch({ type: \"FETCH_ERROR\", payload: err });\n            });\n            setCartItems(Data.data[0].cartItems);\n            dispatch({ type: \"FETCH_SUCCESS\" });\n        };\n        fetchData();\n    }, []);\n\n\n    // Card components creation:\n    const Items = cartItems.map((product) => {\n        return (\n            <MDBCol key={product._id} size='4' sm={4} lg={4} xl={4} xxl={4}>\n                <CartItem key={product._id} items={product} />\n            </MDBCol>\n        )\n    });\n\n\n    // Seperate To Rows:\n    var final = [];\n    for (let i = 0; i < Items.length; i + 3) {\n        const slice = Items.splice(0, 3);\n        final.push(<MDBRow className={\"Row\" + i} key={i++}>{slice}</MDBRow>);\n    }\n\n    return (\n        <MDBContainer className='mt-3'>\n            <MDBRow className='mb-3'>\n                {ctxCart.length === 0 ? <h1 className='h1'>Cart is Empty</h1>\n                    : loading ? <Spinner variant='primary' animation='border' role=\"status\" className='loading'>\n                        <span className=\"visually-hidden\">Loading...</span>\n                    </Spinner> : final}\n            </MDBRow>\n        </MDBContainer>\n    );\n};\n\nexport default CartGrid;"],"mappings":"+dAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,CAAEC,UAAU,KAAQ,OAAO,CAC1E,OAASC,YAAY,CAAEC,MAAM,CAAEC,MAAM,KAAQ,kBAAkB,CAC/D,MAAOC,QAAO,KAAM,yBAAyB,CAC7C,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,SAAQ,KAAM,eAAe,CACpC,OAASC,KAAK,KAAQ,gBAAgB,CAAC,2CAGvC,GAAMC,QAAO,CAAG,QAAVA,QAAO,CAAIC,KAAK,CAAEC,MAAM,CAAK,CAC/B,OAAQA,MAAM,CAACC,IAAI,EACf,IAAK,eAAe,CAChB,sCAAYF,KAAK,MAAEG,OAAO,CAAE,IAAI,GACpC,IAAK,eAAe,CAChB,sCAAYH,KAAK,MAAEG,OAAO,CAAE,KAAK,GACrC,IAAK,aAAa,CACd,sCAAYH,KAAK,MAAEG,OAAO,CAAE,KAAK,CAAEC,KAAK,CAAEH,MAAM,CAACI,OAAO,GAC5D,QACI,MAAOL,MAAK,CAAC,CAEzB,CAAC,CAGD,QAASM,SAAQ,EAAG,CAChB,gBAAkBf,UAAU,CAACO,KAAK,CAAC,CAA3BE,KAAK,aAALA,KAAK,CACb,GAAMO,QAAO,CAAGP,KAAK,CAACQ,IAAI,CAACC,SAAS,CACpC,gBAAgCnB,UAAU,CAACS,OAAO,CAAE,CAChDW,QAAQ,CAAE,EAAE,CACZP,OAAO,CAAE,KAAK,CACdC,KAAK,CAAE,KACX,CAAC,CAAC,4CAJOD,OAAO,iBAAPA,OAAO,CAAIQ,QAAQ,iBAM5B,cAAkCtB,QAAQ,CAAC,EAAE,CAAC,wCAAvCoB,SAAS,eAAEG,YAAY,eAE9BxB,SAAS,CAAC,UAAM,CACZ,GAAMyB,UAAS,4FAAG,8IACdF,QAAQ,CAAC,CAAET,IAAI,CAAE,eAAgB,CAAC,CAAC,CAAC,sBACjBN,MAAK,CAAC,CACrBkB,MAAM,CAAE,KAAK,CACbC,GAAG,CAAE,4BACT,CAAC,CAAC,CAACC,KAAK,CAAC,SAACC,GAAG,CAAK,CACdN,QAAQ,CAAC,CAAET,IAAI,CAAE,aAAa,CAAEG,OAAO,CAAEY,GAAI,CAAC,CAAC,CACnD,CAAC,CAAC,QALIC,IAAI,eAMVN,YAAY,CAACM,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,CAACV,SAAS,CAAC,CACpCE,QAAQ,CAAC,CAAET,IAAI,CAAE,eAAgB,CAAC,CAAC,CAAC,sDACvC,kBAVKW,UAAS,0CAUd,CACDA,SAAS,EAAE,CACf,CAAC,CAAE,EAAE,CAAC,CAGN;AACA,GAAMO,MAAK,CAAGX,SAAS,CAACY,GAAG,CAAC,SAACC,OAAO,CAAK,CACrC,mBACI,KAAC,MAAM,EAAmB,IAAI,CAAC,GAAG,CAAC,EAAE,CAAE,CAAE,CAAC,EAAE,CAAE,CAAE,CAAC,EAAE,CAAE,CAAE,CAAC,GAAG,CAAE,CAAE,uBAC3D,KAAC,QAAQ,EAAmB,KAAK,CAAEA,OAAQ,EAA5BA,OAAO,CAACC,GAAG,CAAoB,EADrCD,OAAO,CAACC,GAAG,CAEf,CAEjB,CAAC,CAAC,CAGF;AACA,GAAIC,MAAK,CAAG,EAAE,CACd,IAAK,GAAIC,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAGL,KAAK,CAACM,MAAM,CAAED,CAAC,CAAG,CAAC,CAAE,CACrC,GAAME,MAAK,CAAGP,KAAK,CAACQ,MAAM,CAAC,CAAC,CAAE,CAAC,CAAC,CAChCJ,KAAK,CAACK,IAAI,cAAC,KAAC,MAAM,EAAC,SAAS,CAAE,KAAK,CAAGJ,CAAE,UAAYE,KAAK,EAAXF,CAAC,EAAE,CAAkB,CAAC,CACxE,CAEA,mBACI,KAAC,YAAY,EAAC,SAAS,CAAC,MAAM,uBAC1B,KAAC,MAAM,EAAC,SAAS,CAAC,MAAM,UACnBlB,OAAO,CAACmB,MAAM,GAAK,CAAC,cAAG,WAAI,SAAS,CAAC,IAAI,2BAAmB,CACvDvB,OAAO,cAAG,KAAC,OAAO,EAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,uBACvF,aAAM,SAAS,CAAC,iBAAiB,wBAAkB,EAC7C,CAAGqB,KAAK,EACjB,EACE,CAEvB,CAAC,CAED,cAAelB,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}