{"ast":null,"code":"import _toConsumableArray from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/almog/ReactPro/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useReducer,useContext}from'react';import{MDBContainer,MDBRow,MDBCol}from'mdb-react-ui-kit';import axios from'axios';import Card from'../structures/Card.js';import{Store}from'../../Store.js';import Spinner from'react-bootstrap/Spinner';import CardModal from'../structures/CardModal.js';// Reducer:\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case\"FETCH_REQUEST\":return _objectSpread(_objectSpread({},state),{},{loading:true});case\"FETCH_SUCCESS\":return _objectSpread(_objectSpread({},state),{},{loading:false,products:action.payload});case\"FETCH_ERROR\":return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});default:return state;}};function Grid(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),bottomModal=_useState2[0],setBottomModal=_useState2[1];var _useReducer=useReducer(reducer,{products:[],loading:false,error:false}),_useReducer2=_slicedToArray(_useReducer,2),loading=_useReducer2[0].loading,dispatch=_useReducer2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productsNew=_useState4[0],setProducts=_useState4[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$catch,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"FETCH_REQUEST\"});_context.next=3;return axios({method:'GET',url:'http://localhost:3001/data'}).catch(function(err){dispatch({type:\"FETCH_ERROR\",payload:err});});case 3:_yield$axios$catch=_context.sent;data=_yield$axios$catch.data;dispatch({type:\"FETCH_SUCCESS\",payload:data});setProducts(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);// sort the products by price:\nproductsNew.sort(function(a,b){return a.price-b.price;});var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),Cart=_useState6[0],setCart=_useState6[1];var _useContext=useContext(Store),ctxDispatch=_useContext.dispatch;var onClickHandler=function onClickHandler(item){setCart([].concat(_toConsumableArray(Cart),[item]));axios({method:'POST',url:'http://localhost:3001/add-to-cart',data:{product:item}});ctxDispatch({type:'ADD_TO_CART',payload:{product:item,price:item.price}});};// Card components creation:\nvar Items=productsNew.map(function(product){return/*#__PURE__*/_jsx(MDBCol,{size:\"4\",sm:4,lg:4,xl:4,xxl:4,children:/*#__PURE__*/_jsx(Card,{items:product,handleClick:onClickHandler,toggleModal:setBottomModal},product._id)},product._id);});// Seperate To Rows:\nvar final=[];for(var i=0;i<Items.length;i+3){var slice=Items.splice(0,3);final.push(/*#__PURE__*/_jsx(MDBRow,{className:\"Row\"+i,children:slice},i++));}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardModal,{bottomModal:bottomModal,toggleModal:setBottomModal}),/*#__PURE__*/_jsx(MDBContainer,{className:\"mt-3\",children:/*#__PURE__*/_jsx(MDBRow,{className:\"mb-3\",children:loading?/*#__PURE__*/_jsx(Spinner,{variant:\"primary\",className:\"loading\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}):final})})]});}export default Grid;","map":{"version":3,"names":["React","useEffect","useState","useReducer","useContext","MDBContainer","MDBRow","MDBCol","axios","Card","Store","Spinner","CardModal","reducer","state","action","type","loading","products","payload","error","Grid","bottomModal","setBottomModal","dispatch","productsNew","setProducts","fetchData","method","url","catch","err","data","sort","a","b","price","Cart","setCart","ctxDispatch","onClickHandler","item","product","Items","map","_id","final","i","length","slice","splice","push"],"sources":["C:/Users/almog/ReactPro/client/src/components/structures/Grid.js"],"sourcesContent":["import React, { useEffect, useState, useReducer, useContext } from 'react';\nimport { MDBContainer, MDBRow, MDBCol } from 'mdb-react-ui-kit';\nimport axios from 'axios';\nimport Card from '../structures/Card.js';\nimport { Store } from '../../Store.js';\nimport Spinner from 'react-bootstrap/Spinner';\nimport CardModal from '../structures/CardModal.js';\n\n// Reducer:\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case \"FETCH_REQUEST\":\n            return { ...state, loading: true };\n        case \"FETCH_SUCCESS\":\n            return { ...state, loading: false, products: action.payload };\n        case \"FETCH_ERROR\":\n            return { ...state, loading: false, error: action.payload };\n        default:\n            return state;\n    }\n};\n\n\nfunction Grid() {\n    const [bottomModal, setBottomModal] = useState(false);\n\n\n    const [{ loading }, dispatch] = useReducer(reducer, {\n        products: [],\n        loading: false,\n        error: false,\n    });\n\n\n    const [productsNew, setProducts] = useState([]);\n    useEffect(() => {\n        const fetchData = async () => {\n            dispatch({ type: \"FETCH_REQUEST\" });\n            const { data } = await axios({\n                method: 'GET',\n                url: 'http://localhost:3001/data',\n            }).catch((err) => {\n                dispatch({ type: \"FETCH_ERROR\", payload: err });\n            });\n            dispatch({ type: \"FETCH_SUCCESS\", payload: data });\n            setProducts(data);\n        };\n        fetchData();\n    }, []);\n\n\n    // sort the products by price:\n    productsNew.sort((a, b) => a.price - b.price);\n    const [Cart, setCart] = useState([]);\n\n\n    const { dispatch: ctxDispatch } = useContext(Store);\n    const onClickHandler = (item) => {\n        setCart([...Cart, item]);\n        axios({\n            method: 'POST',\n            url: 'http://localhost:3001/add-to-cart',\n            data: {\n                product: item\n            }\n        })\n        ctxDispatch({\n            type: 'ADD_TO_CART', payload: {\n                product: item,\n                price: item.price\n            }\n        });\n    };\n\n\n\n    // Card components creation:\n    const Items = productsNew.map((product) => {\n        return (\n            <MDBCol key={product._id} size='4' sm={4} lg={4} xl={4} xxl={4}>\n                <Card key={product._id} items={product} handleClick={onClickHandler} toggleModal={setBottomModal} />\n            </MDBCol>\n        )\n    });\n\n    // Seperate To Rows:\n    var final = [];\n    for (let i = 0; i < Items.length; i + 3) {\n        const slice = Items.splice(0, 3);\n        final.push(<MDBRow className={\"Row\" + i} key={i++}>{slice}</MDBRow>);\n    }\n\n    return (\n        <>\n            <CardModal bottomModal={bottomModal} toggleModal={setBottomModal} />\n            <MDBContainer className='mt-3'>\n                <MDBRow className='mb-3'>\n                    {loading ? <Spinner variant='primary' className='loading'>\n                        <span className='visually-hidden'>Loading...</span>\n                    </Spinner> : final}\n                </MDBRow>\n            </MDBContainer>\n        </>\n    );\n}\n\nexport default Grid;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}